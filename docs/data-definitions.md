# CiteBots Data Definitions

This document explains the data structure used in CiteBots and how each field is generated or calculated.

## Batch Data

| Field | Description | Source |
|-------|-------------|--------|
| `batch_id` | Unique identifier for the batch of queries | Generated timestamp when the process starts |
| `client_name` | Name of the client | Provided manually by user or from client-info.md file |
| `client_domain` | Domain of the client | Provided manually by user or from client-info.md file |
| `platform` | AI platform used for analysis | Specified as command-line parameter (chatgpt, perplexity, or both) |
| `intents` | Array of query intents processed | Specified as command-line parameter or defaults to all intents |
| `keywords` | Array of keywords being processed | Loaded from keywords.md file |
| `date_of_analysis` | Timestamp of analysis | Generated at runtime |
| `queries_total` | Total number of queries planned | Calculated based on keywords × intents |
| `queries_completed` | Number of completed queries | Tracked during execution |

## Query Data

| Field | Description | Source |
|-------|-------------|--------|
| `keyword` | Base keyword for the query | From keywords.md file |
| `intent` | Intent category for the query | Generated based on intent templates |
| `query` | The actual query sent to AI | Generated by applying intent template to keyword |
| `client_name` | Name of the client | Inherited from batch data |
| `client_domain` | Domain of the client | Inherited from batch data |
| `timestamp` | Time when query was processed | Generated at runtime |
| `date_of_analysis` | Formatted date of analysis | Converted from timestamp |
| `platforms` | List of platforms used | Based on platform parameter |

## AI Response Data

| Field | Description | Source |
|-------|-------------|--------|
| `query_id` | Unique identifier for the query | Generated at runtime (platform prefix + uuid) |
| `query_text` | The text of the query | Inherited from query data |
| `query_keyword` | Main keyword extracted | Extracted using OpenAI or derived from query text |
| `funnel_stage` | Marketing funnel stage | Extracted using OpenAI or default based on intent |
| `citation_count` | Number of citations found | Counted from extracted citations |
| `query_category` | Category of the query | Extracted using OpenAI or default based on intent |
| `query_topic` | Topic area of the query | Extracted using OpenAI or default ("Marketing Technology") |
| `query_complexity` | Complexity rating | Based on sentence structure or extracted using OpenAI |
| `query_type` | Type classification | Extracted using OpenAI or derived from query structure |
| `query_intent` | Intent classification | Inherited from intent parameter |
| `model_response` | Full text response from AI | Raw response from ChatGPT or Perplexity |
| `run_timestamp` | Time of execution | Generated at runtime |
| `data_source` | Source platform | "chatgpt" or "perplexity" |
| `brand_mentioned` | Whether brand is mentioned | Detected by checkBrandMention function |
| `brand_sentiment` | Sentiment if brand mentioned | Analyzed using analyzeBrandSentiment if brand is mentioned |
| `competitor_mentioned_name` | Names of competitors mentioned | Detected by checkCompetitorMentions function |
| `competitor_count` | Count of competitors mentioned | Length of competitor_mentioned_name array |
| `associated_pages_count` | Number of crawled pages | Count of associated_pages array |
| `response_match` | Response relevance to query | Extracted using OpenAI or default ("direct") |
| `response_outcome` | Primary outcome type | Extracted using OpenAI or based on intent |
| `brand_mention_type` | How brand is mentioned | Extracted using OpenAI or default ("none") |
| `competitor_context` | Context of competitor mentions | Extracted using OpenAI or default ("none") |
| `action_orientation` | Call-to-action strength | Extracted using OpenAI or based on intent |
| `query_competition` | Competitive landscape assessment | Extracted using OpenAI or default ("opportunity") |

## Page Analysis Data

Each page analysis represents a crawled web page from citations found in AI responses.

### Technical SEO

| Field | Description | Source |
|-------|-------------|--------|
| `is_valid` | Whether URL is valid | Validated by crawler |
| `is_crawlable` | Whether page is crawlable | Determined during crawl |
| `http_response_code` | HTTP status code | From HTTP response |
| `schema_markup_present` | Whether schema.org markup exists | Detected by extractSchemaData |
| `schema_types` | Types of schema markup | Extracted from JSON-LD or microdata |
| `html_structure_score` | Score for HTML structure | Calculated based on semantic elements |
| `semantic_html_usage` | Use of semantic HTML | Detected during crawl |
| `mobile_friendly` | Mobile compatibility estimation | Default or detected during crawl |
| `hreflang_declaration` | International targeting | Detected from HTML tags |
| `date_created` | Creation date | From meta tags if available |
| `date_modified` | Last modified date | From meta tags if available |
| `cdn_usage` | CDN detection | Default or detected from headers |
| `meta_description_present` | Meta description exists | Detected during crawl |
| `aria_labels_present` | Accessibility attributes | Detected during crawl |
| `aria_labels_types` | Types of aria attributes | Extracted during crawl |
| `social_graphs_present` | Open Graph/Twitter tags | Detected during crawl |

### Page Performance

| Field | Description | Source |
|-------|-------------|--------|
| `page_speed_score` | Estimated speed score | Default (50) as actual test not performed |
| `firstContentfulPaint` | FCP metric | Default (1000ms) |
| `largestContentfulPaint` | LCP metric | Default (2500ms) |
| `totalBlockingTime` | TBT metric | Default (100ms) |
| `cumulativeLayoutShift` | CLS metric | Default (0.1) |
| `accessibility_score` | Accessibility rating | Calculated from accessibility elements |

### Domain Authority

| Field | Description | Source |
|-------|-------------|--------|
| `domain_name` | Domain of the page | Extracted from URL |
| `domain_authority` | Domain authority | Default (30) as actual API not used |
| `page_authority` | Page authority | Default (20) as actual API not used |
| `backlink_count` | Estimated backlinks | Default (100) as actual API not used |
| `referring_domains` | Estimated referring domains | Default (50) as actual API not used |
| `link_propensity` | Link probability metric | Default (0.5) as actual API not used |
| `spam_score` | Spam likelihood | Default (2) as actual API not used |

### On-Page SEO

| Field | Description | Source |
|-------|-------------|--------|
| `page_title` | Title of the page | Extracted from HTML |
| `content_type` | Content category | Detected or analyzed with AI |
| `meta_description` | Meta description | Extracted from HTML |
| `word_count` | Word count of main content | Calculated during crawl |
| `image_count` | Number of images | Counted during crawl |
| `video_present` | Video detection | Detected from HTML elements |
| `has_table` | Table presence | Detected during crawl |
| `has_table_count` | Number of tables | Counted during crawl |
| `has_unordered_list` | Unordered list presence | Detected during crawl |
| `has_unordered_list_count` | Number of unordered lists | Counted during crawl |
| `has_ordered_list` | Ordered list presence | Detected during crawl |
| `has_ordered_list_count` | Number of ordered lists | Counted during crawl |
| `internal_link_count` | Internal links | Counted during crawl |
| `folder_depth` | URL folder depth | Calculated from URL path |
| `authorship_clear` | Author attribution | Detected from author elements |
| `heading_count` | Total headings | Sum of all heading elements |
| `heading_count_type` | Counts by heading level | Counted during crawl |
| `keyword_match` | Keywords found in content | Analyzed with AI or extracted from content |

### Content Quality

| Field | Description | Source |
|-------|-------------|--------|
| `content_depth_score` | Content depth rating | Analyzed with AI (1-5 scale) |
| `readability_score` | Readability rating | Analyzed or default (5) |
| `sentiment_score` | Content sentiment | Analyzed with AI (-1 to 1 scale) |
| `content_uniqueness` | Uniqueness assessment | Analyzed with AI (1-5 scale) |
| `content_optimization_score` | SEO optimization rating | Analyzed with AI (1-5 scale) |
| `has_statistics` | Statistics presence | Detected during crawl |
| `has_quotes` | Quotes presence | Detected during crawl |
| `has_citations` | Citations presence | Detected during crawl |
| `has_research` | Research mention | Analyzed with AI |
| `analysis_score` | Overall quality score | Analyzed with AI (1-5 scale) |
| `rock_paper_scissors` | Content type categorization | Analyzed with AI (Paper/Rock/Scissors) |
| `citation_match_quality` | Citation relevance to query | Analyzed with AI (1-5 scale) |
| `eeat_score` | E-E-A-T signals score | Default (5) or analyzed |
| `ai_content_detection` | AI-generated content likelihood | Default (3) or analyzed |
| `topical_cluster` | Main topic cluster | Extracted with AI |

### Page Analysis

| Field | Description | Source |
|-------|-------------|--------|
| `page_relevance_type` | Relevance to query | Analyzed with AI (direct/partial/misaligned) |
| `page_intent_alignment` | Alignment with query intent | Analyzed with AI (high/moderate/low/mismatch) |
| `content_format` | Content format type | Analyzed (article/blog/landing_page/etc.) |
| `content_depth` | Depth assessment | Analyzed (comprehensive/overview/shallow) |
| `brand_positioning` | Brand positioning | Analyzed (prominent/mentioned/absent) |
| `competitor_presence` | Competitor mentions | Analyzed (exclusive/featured/mentioned/none) |
| `call_to_action_strength` | CTA effectiveness | Analyzed (strong/moderate/passive/none) |
| `content_recency` | Content freshness | Analyzed (recent/older/outdated/undated) |
| `eeat_signals` | E-E-A-T signals strength | Analyzed (strong/moderate/weak) |
| `user_experience_quality` | UX assessment | Analyzed (excellent/good/average/poor/problematic) |
| `content_structure` | Content organization | Analyzed (hierarchical/linear/fragmented) |

### Additional Citation Data

| Field | Description | Source |
|-------|-------------|--------|
| `citation_url` | URL of the citation | Extracted from AI response |
| `citation_position` | Position in citations list | Tracked during extraction |
| `mention_type` | Type of mention | Default ["citation"] or detected |
| `is_client_domain` | Client domain match | Compared with client domain |
| `is_competitor_domain` | Competitor domain match | Compared with competitor domains |
| `analysis_notes` | Analysis summary | Generated with AI |

## Summary Data

| Field | Description | Source |
|-------|-------------|--------|
| `citations` | List of citation objects | Generated from AI citations |
| `brandMentions` | Brand mention information | Aggregated during analysis |
| `competitorMentions` | Competitor mention details | Aggregated during analysis |
| `all_queries` | Complete query data | All processed queries |

## Consolidated Report Fields

| Field | Description | Source |
|-------|-------------|--------|
| `queries_by_keyword` | Queries organized by keyword | Reorganized from all_queries data |
| `total_queries_planned` | Total queries in plan | Calculated from keywords × intents |
| `completed_queries` | Number of completed queries | Count of completed queries |

## Environment Settings

Various environment variables and settings affect how data is generated:

- `OPENAI_API_KEY`: Used for AI-based analysis
- `SCRAPINGBEE_API_KEY`: Used for pro crawler
- `CITEBOTS_CRAWLER`: Controls crawler type (basic/pro)

## Value Generation

1. **User-Provided Values**: 
   - Client name and domain
   - Keywords
   - Query intents
   - Platform selection

2. **Generated Values**:
   - Timestamps
   - IDs
   - Query text (from templates)
   - Counts (citations, competitors, etc.)

3. **AI-Generated Values**:
   - Query categorization
   - Content analysis
   - Keyword extraction
   - Sentiment analysis
   - Content quality metrics

4. **Crawler-Generated Values**:
   - HTML structure analysis
   - SEO data points
   - Content extraction
   - URL properties

5. **Default Values**:
   - Domain metrics (when APIs not available)
   - Performance metrics (when testing not performed)
   - Basic assessment scores

This documentation provides an overview of the CiteBots data structure and how each field is derived or calculated. Understanding these definitions helps when interpreting the output data and when modifying the system to customize the analysis process.